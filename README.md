# 选股通 Web 版

一个功能强大的股票分析工具，专注于题材分析和实时数据展示，帮助投资者快速发现市场热点和潜在机会。

## 功能特性

### 核心功能
- **题材分析**：按题材同列展示股票数据，快速发现市场热点
- **实时数据**：交易时间内自动刷新现价、涨幅、成交额等数据
- **分时图**：展示股票实时分时走势
- **所有股票同列**：完整展示所有股票数据，支持多维度排序
- **数据筛选**：支持按日期、题材进行数据筛选
- **股票搜索**：快速搜索特定股票
- **数据抓取**：手动触发数据抓取，确保数据及时更新

### 技术特点
- **响应式设计**：适配不同屏幕尺寸
- **高性能渲染**：分批渲染大量数据，避免页面卡顿
- **实时数据缓存**：减少重复API请求，提升性能
- **交易时间智能判断**：只在交易时间内执行自动刷新
- **错误处理**：完善的错误捕获机制，确保系统稳定运行

## 技术栈

### 前端
- HTML5 + CSS3
- JavaScript (ES6+)
- ECharts (分时图展示)

### 后端
- Python 3.8+
- Flask 2.0+
- SQLite (数据存储)

### 数据来源
- 东方财富网 API (实时股票数据)
- 自研爬虫 (历史数据抓取)

## 安装说明

### 1. 环境准备
- Python 3.8 或更高版本
- pip 包管理工具

### 2. 依赖安装
```bash
# 克隆项目
git clone https://github.com/yourusername/xuangutong-web.git
cd xuangutong-web

# 安装依赖
pip install -r requirements.txt
```

### 3. 配置文件
- 复制 `.env.example` 文件为 `.env`
- 根据实际情况修改配置参数

### 4. 数据库初始化
```bash
# 运行初始化脚本
python init_db.py
```

### 5. 启动应用
```bash
# 开发模式
python app.py

# 或使用 Flask 命令
flask run --host=0.0.0.0 --port=5000
```

应用将在 `http://localhost:5000` 启动

## 使用方法

### 首页（按题材同列）
1. **查看题材**：左侧展示题材列表，点击题材查看相关股票
2. **实时数据**：交易时间内自动刷新现价、涨幅、成交额
3. **排序功能**：点击表头可按涨幅、成交额等排序
4. **日期选择**：选择特定日期查看历史数据
5. **跳转到同列**：点击"所有股票同列"查看完整数据

### 所有股票同列页面
1. **股票搜索**：顶部搜索框输入股票名称快速定位
2. **题材筛选**：右侧搜索框输入题材名称筛选相关股票
3. **分时图**：查看股票实时分时走势
4. **多维度排序**：支持按涨幅、成交额、几天几板等排序
5. **跳转到题材同列**：点击"按题材同列"返回首页

### 数据抓取
1. 在首页点击"抓取股票数据"按钮
2. 等待数据抓取完成（首次抓取可能需要较长时间）
3. 抓取完成后页面会自动刷新显示最新数据

## 项目结构

```
xuangutong-web/
├── app.py                 # Flask 应用主文件
├── crawler.py             # 股票数据抓取模块
├── db.py                  # 数据库操作模块
├── huoli.py               # 获利比例数据模块
├── templates/             # HTML 模板
│   ├── index.html         # 首页（按题材同列）
│   ├── all_hot.html       # 所有股票同列页面
│   └── stock_detail.html  # 股票详情页面
├── static/                # 静态资源
│   ├── css/               # CSS 样式
│   └── js/                # JavaScript 文件
├── requirements.txt       # 依赖包列表
├── README.md              # 项目说明
└── .env.example           # 环境变量示例
```

## 数据说明

### 数据字段
- **股票名称**：股票的中文名称
- **几天几板**：股票连续涨停天数
- **现价**：股票当前价格（实时数据）
- **涨幅**：股票涨跌幅（实时数据）
- **涨停时间**：股票涨停的时间
- **成交额**：股票当日成交额（实时数据）
- **涨停原因**：股票涨停的原因分析
- **题材**：股票所属的题材概念

### 数据更新
- **历史数据**：通过爬虫定期抓取
- **实时数据**：交易时间内每60秒自动刷新
- **手动更新**：点击"抓取股票数据"按钮手动触发

## 注意事项

1. **数据延迟**：实时数据可能存在1-3分钟的延迟，仅供参考
2. **交易时间**：自动刷新功能仅在交易时间（9:25-15:00）内生效
3. **数据准确性**：数据来源于公开API，仅供参考，不构成投资建议
4. **性能优化**：大量数据加载时可能会有短暂延迟，属于正常现象
5. **浏览器兼容性**：建议使用 Chrome、Firefox 等现代浏览器

## 常见问题

### Q: 首页数据不显示怎么办？
A: 请点击"抓取股票数据"按钮手动触发数据抓取，首次抓取可能需要较长时间。

### Q: 实时数据不更新怎么办？
A: 请检查当前是否为交易时间（9:25-15:00），非交易时间系统不会执行自动刷新。

### Q: 分时图不显示怎么办？
A: 请确保网络连接正常，分时图数据加载可能需要几秒钟时间。

### Q: 数据抓取失败怎么办？
A: 请检查网络连接，或稍后再次尝试。如果问题持续，请查看服务器日志。

## 许可证

MIT License

## 免责声明

本工具仅供学习和研究使用，不构成任何投资建议。投资者应根据自身情况做出投资决策，工具开发者不对任何投资损失负责。

## 联系方式

- 公众号：别浪 好好学习

---

**更新时间**：2026-01-10
**版本**：v1.0.0
